@using Boot.Enums;
@using Boot.Helpers;
@model List<Boot.Models.JsonModels.Perk>

<h5>Способности</h5>
<table class="table table-bordered">
    <tr>
        <th>Уровень</th>
        <th class="w-20">Название</th>
        <th class="w-25">Требования</th>
        <th class="w-50">Эффект</th>
    </tr>
    @foreach (var perk in Model)
    {
        <tr>
            <td class="text-center">@perk.requirements.Single(x => x.type == RequirementType.Level).value</td>
            <td>@perk.name</td>
            <td>
                @foreach (var r in perk.requirements.Where(x => x.type != RequirementType.Level).OrderBy(x => x.type))
                {
                    switch (r.type)
                    {
                        case RequirementType.Perk:
                            @Model.Single(x => x.id == r.value).name<br />
                            break;
                        case RequirementType.Race:
                            @r.strValue <br />
                            break;
                        case RequirementType.Stat:
                            @:@r.statId: @r.value
                            break;
                    }
                }
                @if (perk.requirements.All(x => x.type == RequirementType.Level))
                {
                    @:Нет
                }
            </td>
            <td>@perk.desc</td>
        </tr>
    }
</table>